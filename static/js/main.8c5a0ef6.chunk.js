(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[3],{110:function(t,e,n){},111:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(24),o=n.n(a),u=n(16),s=n(10),i=n(49),b=n(33),l=n(34),j=n(37),f=n(35),O=n(6),d={home:"/",contacts:"/contacts",register:"/register",login:"/login"},h=n(9),g=n(22),p=n.n(g),v=n(1),x=Object(s.b)((function(t){return{isAuthenticated:h.c.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(v.jsxs)("nav",{children:[Object(v.jsx)(u.b,{to:"/",exact:!0,className:p.a.link,activeClassName:p.a.activeLink,children:"Home"}),e&&Object(v.jsx)(u.b,{to:"/contacts",exact:!0,className:p.a.link,activeClassName:p.a.activeLink,children:"\u0421ontacts"})]})})),m=n(32),C=n.n(m),k={onLogout:h.a.logOut},_=Object(s.b)((function(t){return{post:h.c.getUserPost(t)}}),k)((function(t){var e=t.post,n=t.onLogout;return Object(v.jsxs)("div",{className:C.a.container,children:[Object(v.jsxs)("span",{className:C.a.post,children:["Welcome, ",e]}),Object(v.jsx)("button",{type:"button",onClick:n,children:"Logout"})]})})),S=n(23),y=n.n(S),A=function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)(u.b,{to:d.register,exact:!0,className:y.a.link,activeClassName:y.a.activeLink,children:"Register now"}),Object(v.jsx)(u.b,{to:d.login,exact:!0,className:y.a.link,activeClassName:y.a.activeLink,children:"Log In"})]})},E=n(50),U=n.n(E),N=Object(s.b)((function(t){return{isAuthenticated:h.c.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(v.jsxs)("header",{className:U.a.header,children:[Object(v.jsx)(x,{}),e?Object(v.jsx)(_,{}):Object(v.jsx)(A,{})]})})),w=n(51),q=n.n(w),L=function(t){var e=t.children;return Object(v.jsx)("div",{className:q.a.Container,children:e})},R=n(17),T=n(26),z=["component","isAuthenticated","redirectTo"],I=Object(s.b)((function(t){return{isAuthenticated:h.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(T.a)(t,z);return Object(v.jsx)(O.b,Object(R.a)(Object(R.a)({},c),{},{render:function(t){return n?Object(v.jsx)(e,Object(R.a)({},t)):Object(v.jsx)(O.a,{to:r})}}))})),B=["component","isAuthenticated","redirectTo"],M=Object(s.b)((function(t){return{isAuthenticated:h.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(T.a)(t,B);return Object(v.jsx)(O.b,Object(R.a)(Object(R.a)({},c),{},{render:function(t){return n&&c.restricted?Object(v.jsx)(O.a,{to:r}):Object(v.jsx)(e,Object(R.a)({},t))}}))})),P=n(47),D=n(54),F=n.n(D),G=Object(r.lazy)((function(){return n.e(1).then(n.bind(null,129))})),H=Object(r.lazy)((function(){return n.e(2).then(n.bind(null,130))})),J=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,131))})),W=Object(r.lazy)((function(){return n.e(0).then(n.bind(null,132))})),Q=function(t){Object(j.a)(n,t);var e=Object(f.a)(n);function n(){return Object(b.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(v.jsxs)(L,{children:[Object(v.jsx)(N,{}),Object(v.jsx)("h1",{className:F.a.title,children:"Phonebook"}),Object(v.jsx)(r.Suspense,{fallback:Object(v.jsx)(P.a,{}),children:Object(v.jsxs)(O.d,{children:[Object(v.jsx)(O.b,{exact:!0,path:d.home,component:G}),Object(v.jsx)(M,{path:d.register,restricted:!0,redirectTo:d.contacts,component:J}),Object(v.jsx)(M,{path:d.login,restricted:!0,redirectTo:d.contacts,component:H}),Object(v.jsx)(I,{path:d.contacts,redirectTo:d.login,component:W})]})})]})}}]),n}(r.Component),X={onGetCurrentUser:h.a.getCurrentUser},K=Object(s.b)(null,X)(Q),V=n(27),Y=n(2),Z=n(55),$=n.n(Z),tt=n(19),et=n(56),nt=n.n(et),rt=n(36),ct=[].concat(Object(V.a)(Object(Y.d)({serializableCheck:{ignoredActions:[tt.a,tt.f,tt.b,tt.c,tt.d,tt.e]}})),[$.a]),at={key:"auth",storage:nt.a,whitelist:["token"]},ot=Object(Y.a)({reducer:{auth:Object(tt.g)(at,h.b),contacts:rt.b},middleware:ct,devTools:!1}),ut={store:ot,persistor:Object(tt.h)(ot)};n(109),n(110);o.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(s.a,{store:ut.store,children:Object(v.jsx)(i.a,{loading:null,persistor:ut.persistor,children:Object(v.jsx)(u.a,{children:Object(v.jsx)(K,{})})})})}),document.getElementById("root"))},22:function(t,e,n){t.exports={link:"Navigation_link__2BrgH",activeLink:"Navigation_activeLink__TOd7q"}},23:function(t,e,n){t.exports={link:"AuthNav_link__7iSdj",activeLink:"AuthNav_activeLink__zEX_0"}},32:function(t,e,n){t.exports={container:"UserMenu_container__2q1Bv",post:"UserMenu_post__1_fCQ"}},36:function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"c",(function(){return C})),n.d(e,"d",(function(){return g})),n.d(e,"b",(function(){return U}));var r,c,a=n(14),o=n.n(a),u=n(2),s=Object(u.b)("contacts/fetchContactRequest"),i=Object(u.b)("contacts/fetchContactSuccess"),b=Object(u.b)("contacts/fetchContactError"),l=Object(u.b)("contacts/saveContactRequest"),j=Object(u.b)("contacts/saveContactSuccess"),f=Object(u.b)("contacts/saveContactError"),O=Object(u.b)("contacts/deleteContactRequest"),d=Object(u.b)("contacts/deleteContactSuccess"),h=Object(u.b)("contacts/deleteContactError"),g=Object(u.b)("contact/Filter"),p={fetchContacts:function(){return function(t){t(s()),o.a.get("/contacts").then((function(e){var n=e.data;return t(i(n))})).catch((function(e){return t(b(e.message))}))}},saveContact:function(t){var e=t.name,n=t.number;return function(t){var r={name:e,number:n};t(l()),o.a.post("/contacts",r).then((function(e){var n=e.data;return t(j(n))})).catch((function(e){return t(f(e.message))}))}},deleteContact:function(t){return function(e){e(O()),o.a.delete("/contacts/".concat(t)).then((function(){return e(d(t))})).catch((function(t){return e(h(t.message))}))}}},v=n(25),x=function(t){return t.contacts.filter},m=function(t){return t.contacts.items},C={getLoading:function(t){return t.contacts.loading},getfilter:x,getAllContacts:m,getfilteredContacts:Object(v.a)([x,m],(function(t,e){var n=t.toLowerCase();return e.filter((function(t){return t.name.toLowerCase().includes(n)}))}))},k=n(3),_=n(27),S=n(7),y=Object(u.c)([],(r={},Object(k.a)(r,i,(function(t,e){return e.payload})),Object(k.a)(r,j,(function(t,e){return[e.payload].concat(Object(_.a)(t))})),Object(k.a)(r,d,(function(t,e){return t.filter((function(t){return t.id!==e.payload}))})),r)),A=Object(u.c)("",Object(k.a)({},g,(function(t,e){return e.payload}))),E=Object(u.c)(!1,(c={},Object(k.a)(c,s,(function(){return!0})),Object(k.a)(c,i,(function(){return!1})),Object(k.a)(c,b,(function(){return!1})),Object(k.a)(c,l,(function(){return!0})),Object(k.a)(c,j,(function(){return!1})),Object(k.a)(c,f,(function(){return!1})),Object(k.a)(c,O,(function(){return!0})),Object(k.a)(c,d,(function(){return!1})),Object(k.a)(c,h,(function(){return!1})),c)),U=Object(S.b)({items:y,filter:A,loading:E})},47:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(52),c=n.n(r),a=n(53),o=n.n(a),u=n(1),s=function(){return Object(u.jsx)(c.a,{className:o.a.loader,type:"ThreeDots",color:"green",height:70,width:70,timeout:3e3})}},50:function(t,e,n){t.exports={header:"AppBar_header__3jTeW"}},51:function(t,e,n){t.exports={Container:"Container_Container__25tgC"}},53:function(t,e,n){t.exports={loader:"Loader_loader__2cNUS"}},54:function(t,e,n){t.exports={title:"App_title__1F_vB"}},9:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return g})),n.d(e,"b",(function(){return y}));var r=n(18),c=n.n(r),a=n(21),o=n(14),u=n.n(o),s=n(2),i={registerRequest:Object(s.b)("auth/registerRequest"),registerSuccess:Object(s.b)("auth/registerSuccess"),registerError:Object(s.b)("auth/registerError"),loginRequest:Object(s.b)("auth/loginRequest"),loginSuccess:Object(s.b)("auth/loginSuccess"),loginError:Object(s.b)("auth/loginError"),logoutRequest:Object(s.b)("auth/logoutRequest"),logoutSuccess:Object(s.b)("auth/logoutSuccess"),logoutError:Object(s.b)("auth/logoutError"),getCurrentUserRequest:Object(s.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(s.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(s.b)("auth/getCurrentUserError")};u.a.defaults.baseURL="https://connections-api.herokuapp.com";var b,l,j,f,O=function(t){u.a.defaults.headers.common.Authorization="Bearer ".concat(t)},d=function(){u.a.defaults.headers.common.Authorization=""},h={register:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(i.registerRequest()),e.prev=1,e.next=4,u.a.post("/users/signup",t);case 4:r=e.sent,O(r.data.token),n(i.registerSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(i.registerError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(i.loginRequest()),e.prev=1,e.next=4,u.a.post("/users/login",t);case 4:r=e.sent,O(r.data.token),n(i.loginSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(i.loginError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(i.logoutRequest()),t.prev=1,t.next=4,u.a.post("/users/logout");case 4:d(),e(i.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(i.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),a=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return O(a),e(i.getCurrentUserRequest()),t.prev=5,t.next=8,u.a.get("/users/current");case 8:o=t.sent,e(i.getCurrentUserSuccess(o.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(i.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}},g={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUserPost:function(t){return t.auth.user.email}},p=n(3),v=n(7),x={name:null,email:null},m=Object(s.c)(x,(b={},Object(p.a)(b,i.registerSuccess,(function(t,e){return e.payload.user})),Object(p.a)(b,i.loginSuccess,(function(t,e){return e.payload.user})),Object(p.a)(b,i.logoutSuccess,(function(){return x})),Object(p.a)(b,i.getCurrentUserSuccess,(function(t,e){return e.payload})),b)),C=Object(s.c)(null,(l={},Object(p.a)(l,i.registerSuccess,(function(t,e){return e.payload.token})),Object(p.a)(l,i.loginSuccess,(function(t,e){return e.payload.token})),Object(p.a)(l,i.logoutSuccess,(function(){return null})),l)),k=function(t,e){return e.payload},_=Object(s.c)(null,(j={},Object(p.a)(j,i.registerError,k),Object(p.a)(j,i.loginError,k),Object(p.a)(j,i.logoutError,k),Object(p.a)(j,i.getCurrentUserError,k),j)),S=Object(s.c)(!1,(f={},Object(p.a)(f,i.registerSuccess,(function(){return!0})),Object(p.a)(f,i.loginSuccess,(function(){return!0})),Object(p.a)(f,i.getCurrentUserSuccess,(function(){return!0})),Object(p.a)(f,i.logoutSuccess,(function(){return!1})),Object(p.a)(f,i.registerError,(function(){return!1})),Object(p.a)(f,i.loginError,(function(){return!1})),Object(p.a)(f,i.getCurrentUserError,(function(){return!1})),f)),y=Object(v.b)({user:m,isAuthenticated:S,token:C,error:_})}},[[111,5,6]]]);
//# sourceMappingURL=main.8c5a0ef6.chunk.js.map